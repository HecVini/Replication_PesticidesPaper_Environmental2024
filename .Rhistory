# install.packages("remotes")
remotes::install_github("rfsaldanha/microdatasus")
library(devtools)
install.packages("devtools")
install.packages("dplyr")
install.packages("tidyverse")
install.packages("here")
install.packages("data.table")
library(c("microdatasus","dplyr", "tidyverse","here","data.table", "devtools")
library(c("microdatasus","dplyr", "tidyverse","here","data.table", "devtools"))
library(microdatasus)
library(dplyr)
library(tidyverse)
library(here)
library(data.table)
library(devtools)
library(microdatasus)
library(tidyverse)
library(data.table)
fwrite(fetch_datasus(year_start = 2010,  year_end= 2010,
information_system = "SINAN-DENGUE")
, "D:/Dropbox/Dissertation/Proposals/Brazil_Fertility_LaborSupply_Dengu/SINAN/microdatasus/raw_data_2010.csv")
# 2010 --------------------------------------------------------------------
fwrite(fetch_datasus(year_start = 2010,  year_end= 2010,
information_system = "SINAN-DENGUE")
, "D:/Dropbox/Dissertation/Proposals/Brazil_Fertility_LaborSupply_Dengue/SINAN/microdatasus/raw_data_2010.csv")
# 2011 --------------------------------------------------------------------
fwrite(fetch_datasus(year_start = 2011,  year_end= 2011,
information_system = "SINAN-DENGUE")
, "D:/Dropbox/Dissertation/Proposals/Brazil_Fertility_LaborSupply_Dengue/SINAN/microdatasus/raw_data_2011.csv")
library(microdatasus)
a <- tabCBO
View(a)
tabOcupacao <- tabOcupacao
tabCBO <- tabCBO
View(tabOcupacao)
colnames(tabOcupacao)[1] <- "CODOCUPMAE"
colnames(tabCBO)[1] <- "CODOCUPMAE"
View(tabCBO)
## 1. Load Packages
## 1. Load Packages
library(tidyverse) # Easily Installand Load the 'Tidyverse'
library(lubridate) # Make Dealing with Dates a Little Easier
library(janitor) # Simple Tools for Examining and Cleaning Dirty Data
library(data.table) # Extension of `data.frame`
library(tidylog) # Logging for 'dplyr' and 'tidyr' Functions
library(haven) # Open .xpt and Stata (.do) files
library(foreign) # Read and Write Data from Other Statistical Systems
library(Hmisc) # Harrell Miscellaneous. Used to extract .dta file label easily
library(htmltools) # Tools for HTML
library(lintr) # Trying to removing the annoying lint
library(gt) # Easily Create Presentation-Ready Display Tables
library(gtExtras) # Additional Functions to Enhance 'gt'
library(broom) # Convert Statistical Analysis Objects into Tidy Tibbles
library(boot) # Bootstrap Functions for R
library(lfe) # Linear Group Fixed Effects
library(sandwich) # For robust standard errors
library(lmtest) # For coefficient testing with robust standard errors
library(plm) # Panel Data Models - to perform OLS with FE
library(tidyr)
library(tidycat)
library(bife)
# linter:disable
lint(
text = strrep("x", 400L),
linters = line_length_linter(length = 400L)
)
## 2. Load and Clean Data
#setwd("C:/Users/vinic/OneDrive/Mestrado/5Tri/EnvironmentalUrban/ReplicationPackage")
setwd("D:/OneDrive - Fundacao Getulio Vargas - FGV/PhD EPGE/Courses/1T24/Environmental and Urban/replication/Replication_PesticidesPaper_Environmental2024")
bananas1.R <- read_dta("bananas1.dta") # Main dataset used on the papaer
bananas2.R <- read_dta("bananas2.dta") # Dataset used to generate the tables with maternal fixed effects
bananas3.R <- read_dta("bananas3.dta") # Dataset used to generate the tables that examine the effects of pesticides in other crop plantations
bananas1 <- bananas1.R %>% clean_names() # Clean the column names
bananas2 <- bananas2.R %>% clean_names() # Clean the column names
bananas3 <- bananas3.R %>% clean_names() # Clean the column names
# Fit logistic regression model
model <- glm(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + marital + ethnic + factor(cohort) +factor(grid),
family = binomial,
data = bananas1)
# Display results
summary(model)
options (max.print=1000000)
# Fit logistic regression model
model <- glm(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + marital + ethnic + factor(cohort) +factor(grid),
family = binomial,
data = bananas1)
# Display results
summary(model)
options(scipen=99)
# Display results
summary(model)
# Teste - sem controle nenhum por caract da mae e sem efeito fixo
model <- glm(preterm ~ bx*pxp ,
family = binomial,
data = bananas1)
# Display results
summary(model)
# Fit logistic regression model
model <- glm(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + marital + ethnic,
family=binomial,
data=bananas1)
# Display results
summary(model)
# Fit logistic regression model
model <- glm(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + factor(marital) +
factor(ethnic) + factor(cohort) +factor(grid),
family = binomial,
data = bananas1)
# Display results
summary(model)
# Fit logistic regression model
model <- glm(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + marital + ethnic,
family=binomial,
data=bananas1)
# Display results
summary(model)
# Fit logistic regression model
model <- glm(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + marital +
ethnic + (1|cohort) + (1|grid),
family = binomial,
data = bananas1)
# Display results
summary(model)
install.packages("lme4")
library(lme4)
# Fit logistic regression model
model <- glmer(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + marital +
ethnic + (1|cohort)+ (1|grid),
family = binomial,
data = bananas1)
# Fit logistic regression model
model <- glmer(preterm ~bx * pxp + age + educ + private +
labors + nchild + visits + nbl + sex + tlabor + marital +
ethnic + (1| cohort)+ (1| grid),
family = binomial,
data = bananas1)
